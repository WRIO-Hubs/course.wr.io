<!DOCTYPE html>
<html>
<head>
  <title>Update Airtable Record</title>
</head>
<body>

<script type="text/javascript" src="https://bizcom.wr.io/assets/js/airtable.browser.js"></script>

<script>
  var base = new Airtable({ apiKey: 'keyTpq0ckgmWts9xZ' }).base('app166IA16JVxqLL4');

  // Airtable record details
  const table = 'Users';
  const recordId = 'rectnBUnFuTXX8a21';

  // Function to update a record in Airtable
  function updateAirtableRecord(recordId, newFieldValue) {
    base(table).update(
      recordId,
      {
        'TwitterFollowers': newFieldValue
      },
      function(err, record) {
        if (err) {
          console.error('Error updating record:', err);
        } else {
          console.log('Record updated successfully:', record);
        }
      }
    );
  }

  // Listen for postMessage event
  window.addEventListener('message', function(event) {
    // Check if the message is from a trusted source
          const newFieldValue = event.data;

      // Update the record in Airtable
      updateAirtableRecord(recordId, newFieldValue);
    if (event.origin === 'http://example.com') {
      // Get the new field value from the message data

    }
  });
</script>

</body>
</html>
